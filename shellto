#!/bin/bash

# shellto: Script to run bash in specified docker service.
# Usage: ./shellto [w|m|j|n]

source "./config"

# Check if argument is provided
if [ -z "${1:-}" ]; then
    echo "Usage: $0 [w|m|j|n]"
    exit 1
fi

case "$1" in
  w)
    service="mediawiki-web"
    ;;
  m)
    service="mediawiki"
    ;;
  j)
    service="mediawiki-jobrunner"
    ;;
  n)
    service="novnc"
    ;;
  *)
    echo "Invalid argument - Use 'w', 'm', 'j' or 'n'"
    exit 1
    ;;
esac

cd "$MEDIAWIKI_PATH" && docker compose exec -u "$HOST_UID:$HOST_GID" $service sh