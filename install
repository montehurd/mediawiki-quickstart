#!/bin/bash

source "./docker/docker.sh"
source "./config"
source "./open_special_version_page"

install() {
  if ! are_containers_running "mediawiki-mediawiki-web-1"; then
    echo "MediaWiki-web container is not running"
    exit 1
  fi
  export GIT_CLONE_BASE_URL
  if ./shellto -e VERBOSE -e GIT_CLONE_BASE_URL m /var/local/installer/install "$@"; then
    # Restart in case components with thier own docker-compose.yml were installed
    ./restart
    open_special_version_page
  fi
}

if [[ "$0" == "${BASH_SOURCE[0]}" ]]; then
  install "$@"
fi